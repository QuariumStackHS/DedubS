assert((flush == Z_FINISH && ret == Z_STREAM_END) ||
           