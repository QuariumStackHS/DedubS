lse;
          }
        }
      } else {
        ok = false;
      }
    }
    return ok;
  };

  auto done_with_trailer = [&](const Headers *trailer) {
    if (!ok) { return; }

    data_available = false;

    std::string payload;
    if (!compressor.co